#### Define either of the following in style after you include this file
#### pinline_mask_1 := { "custom_pinline_mask.png" }
#### pinline_mask_1 := { pride_mask_for( walker:mainframe_walker(), tall:has_four_abilities(), crown:is_legend() ) }
#### with whatever scripts are needed to get that data
#### do the same from pinline_mask_2 and pinline_mask_3 if needed

#### Also define the height for the template with a script such as
#pinline_height := {
#	if has_four_abilities()
#		then 205
#	else if mainframe_walker()
#		then 240
#	else 234
#}

pinline_masks := "/magic-modules.mse-include/pinlines/masks/"
#### Custom masking since it can only cover the art space
pride_mask_for := {
	pinline_masks
	+ (
		if walker and tall
			then "art m15 4walker"
		else if walker
			then "art m15 walker"
		else if crown
			then "art m15 legend"
		else "art m15 normal"
	)
	+ ".png"
}@(walker:false, tall:false, crown: false)


#### blending script
pride_pinline := {
	count := length(filter_text(input, match:","))+1
	rev := chosen(input, choice:"reversed")
	if input == ""
		then ""
	else if count == 1 then
		"/magic-modules.mse-include/pinlines/flags/" + input + ".png"
	else
		(
			string := split_text(input, match:", ")
			left := if rev then string[1] else string[0]
			right := if rev then string[0] else string[1]
			if rev and count < 3 then
				"/magic-modules.mse-include/pinlines/flags/" + string[0] + ".png"
			else
				masked_blend(light:"/magic-modules.mse-include/pinlines/flags/" + left + ".png", dark:"/magic-modules.mse-include/pinlines/flags/" + right + ".png", mask:"/magic-modules.mse-include/pinlines/masks/blendmask.png")
		)
}

#### Face 1
pinline_left := { face_coordinates_map(1).left }
pinline_top := { if mainframe_walker() then 51 else 58 }
pinline_width := { 
	if face_is_rotated(1) then
		face_coordinates_map(1).height
	else face_coordinates_map(1).width
}
pinline_height := { 
	if face_is_rotated(1) then
		face_coordinates_map(1).width
	else face_coordinates_map(1).height
}

#### Face 2
pinline_left_2 := { face_coordinates_map(2).left }
pinline_top_2 := { if mainframe_walkerb() then 51 else 58 }
pinline_width_2 := { 
	if face_is_rotated(2) then
		face_coordinates_map(2).height
	else face_coordinates_map(2).width
}
pinline_height_2 := { 
	if face_is_rotated(2) then
		face_coordinates_map(2).width
	else face_coordinates_map(2).height
}

#### Face 3
pinline_left_3 := { face_coordinates_map(3).left }
pinline_top_3 := { if mainframe_walkerc() then 51 else 58 }
pinline_width_3 := { 
	if face_is_rotated(3) then
		face_coordinates_map(3).height
	else face_coordinates_map(3).width
}
pinline_height_3 := { 
	if face_is_rotated(3) then
		face_coordinates_map(3).width
	else face_coordinates_map(3).height
}
